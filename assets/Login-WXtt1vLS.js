import{r as a,g as fe,u as de,a as be,j as T,F as ye,I as X,l as me,_ as Ee}from"./index-Ce39H2-j.js";import{u as ge,a as Z}from"./axiosInstance-D1VA4u8v.js";import{u as pe}from"./use-viewport-size-BHk1unL8.js";import{S as Ve}from"./Stack-U2nrZ_Xm.js";import{T as J}from"./TextInput-Cb9jIFpZ.js";import{B as Se}from"./Button-CS9XABgu.js";const je="/assets/auth-DGnL_MR0.jpg";function Fe(t){if(!/^[0-9a-zA-Z-]+$/.test(t))throw new Error(`[@mantine/use-form] Form name "${t}" is invalid, it should contain only letters, numbers and dashes`)}const we=typeof window<"u"?a.useLayoutEffect:a.useEffect;function S(t,e){we(()=>{if(t)return window.addEventListener(t,e),()=>window.removeEventListener(t,e)},[t])}function he(t,e){t&&Fe(t),S(`mantine-form:${t}:set-field-value`,r=>e.setFieldValue(r.detail.path,r.detail.value)),S(`mantine-form:${t}:set-values`,r=>e.setValues(r.detail)),S(`mantine-form:${t}:set-initial-values`,r=>e.setInitialValues(r.detail)),S(`mantine-form:${t}:set-errors`,r=>e.setErrors(r.detail)),S(`mantine-form:${t}:set-field-error`,r=>e.setFieldError(r.detail.path,r.detail.error)),S(`mantine-form:${t}:clear-field-error`,r=>e.clearFieldError(r.detail)),S(`mantine-form:${t}:clear-errors`,e.clearErrors),S(`mantine-form:${t}:reset`,e.reset),S(`mantine-form:${t}:validate`,e.validate),S(`mantine-form:${t}:validate-field`,r=>e.validateField(r.detail)),S(`mantine-form:${t}:reorder-list-item`,r=>e.reorderListItem(r.detail.path,r.detail.payload)),S(`mantine-form:${t}:remove-list-item`,r=>e.removeListItem(r.detail.path,r.detail.index)),S(`mantine-form:${t}:insert-list-item`,r=>e.insertListItem(r.detail.path,r.detail.item,r.detail.index)),S(`mantine-form:${t}:set-dirty`,r=>e.setDirty(r.detail)),S(`mantine-form:${t}:set-touched`,r=>e.setTouched(r.detail)),S(`mantine-form:${t}:reset-dirty`,r=>e.resetDirty(r.detail)),S(`mantine-form:${t}:reset-touched`,e.resetTouched)}function ke(t){return e=>{if(!e)t(e);else if(typeof e=="function")t(e);else if(typeof e=="object"&&"nativeEvent"in e){const{currentTarget:r}=e;r instanceof HTMLInputElement?r.type==="checkbox"?t(r.checked):t(r.value):(r instanceof HTMLTextAreaElement||r instanceof HTMLSelectElement)&&t(r.value)}else t(e)}}function q(t){return t===null||typeof t!="object"?{}:Object.keys(t).reduce((e,r)=>{const n=t[r];return n!=null&&n!==!1&&(e[r]=n),e},{})}function Oe(t){const[e,r]=a.useState(q(t)),n=a.useCallback(i=>{r(l=>q(typeof i=="function"?i(l):i))},[]),s=a.useCallback(()=>r({}),[]),o=a.useCallback(i=>{e[i]!==void 0&&n(l=>{const d={...l};return delete d[i],d})},[e]),c=a.useCallback((i,l)=>{l==null||l===!1?o(i):e[i]!==l&&n(d=>({...d,[i]:l}))},[e]);return{errorsState:e,setErrors:n,clearErrors:s,setFieldError:c,clearFieldError:o}}function re(t,e){if(e===null||typeof e!="object")return{};const r={...e};return Object.keys(e).forEach(n=>{n.includes(`${String(t)}.`)&&delete r[n]}),r}function Q(t,e){const r=t.substring(e.length+1).split(".")[0];return parseInt(r,10)}function Y(t,e,r,n){if(e===void 0)return r;const s=`${String(t)}`;let o=r;n===-1&&(o=re(`${s}.${e}`,o));const c={...o},i=new Set;return Object.entries(o).filter(([l])=>{if(!l.startsWith(`${s}.`))return!1;const d=Q(l,s);return Number.isNaN(d)?!1:d>=e}).forEach(([l,d])=>{const j=Q(l,s),g=l.replace(`${s}.${j}`,`${s}.${j+n}`);c[g]=d,i.add(g),i.has(l)||delete c[l]}),c}function De(t,{from:e,to:r},n){const s=`${t}.${e}`,o=`${t}.${r}`,c={...n};return Object.keys(n).every(i=>{let l,d;if(i.startsWith(s)&&(l=i,d=i.replace(s,o)),i.startsWith(o)&&(l=i.replace(o,s),d=i),l&&d){const j=c[l],g=c[d];return g===void 0?delete c[l]:c[l]=g,j===void 0?delete c[d]:c[d]=j,!1}return!0}),c}function G(t,e,r){typeof r.value=="object"&&(r.value=A(r.value)),!r.enumerable||r.get||r.set||!r.configurable||!r.writable||e==="__proto__"?Object.defineProperty(t,e,r):t[e]=r.value}function A(t){if(typeof t!="object")return t;var e=0,r,n,s,o=Object.prototype.toString.call(t);if(o==="[object Object]"?s=Object.create(t.__proto__||null):o==="[object Array]"?s=Array(t.length):o==="[object Set]"?(s=new Set,t.forEach(function(c){s.add(A(c))})):o==="[object Map]"?(s=new Map,t.forEach(function(c,i){s.set(A(i),A(c))})):o==="[object Date]"?s=new Date(+t):o==="[object RegExp]"?s=new RegExp(t.source,t.flags):o==="[object DataView]"?s=new t.constructor(A(t.buffer)):o==="[object ArrayBuffer]"?s=t.slice(0):o.slice(-6)==="Array]"&&(s=new t.constructor(t)),s){for(n=Object.getOwnPropertySymbols(t);e<n.length;e++)G(s,n[e],Object.getOwnPropertyDescriptor(t,n[e]));for(e=0,n=Object.getOwnPropertyNames(t);e<n.length;e++)Object.hasOwnProperty.call(s,r=n[e])&&s[r]===t[r]||G(s,r,Object.getOwnPropertyDescriptor(t,r))}return s||t}function se(t){return typeof t!="string"?[]:t.split(".")}function h(t,e){const r=se(t);if(r.length===0||typeof e!="object"||e===null)return;let n=e[r[0]];for(let s=1;s<r.length&&n!==void 0;s+=1)n=n[r[s]];return n}function z(t,e,r){const n=se(t);if(n.length===0)return r;const s=A(r);if(n.length===1)return s[n[0]]=e,s;let o=s[n[0]];for(let c=1;c<n.length-1;c+=1){if(o===void 0)return s;o=o[n[c]]}return o[n[n.length-1]]=e,s}function $e(t,{from:e,to:r},n){const s=h(t,n);if(!Array.isArray(s))return n;const o=[...s],c=s[e];return o.splice(e,1),o.splice(r,0,c),z(t,o,n)}function Ie(t,e,r,n){const s=h(t,n);if(!Array.isArray(s))return n;const o=[...s];return o.splice(typeof r=="number"?r:o.length,0,e),z(t,o,n)}function ve(t,e,r){const n=h(t,r);return Array.isArray(n)?z(t,n.filter((s,o)=>o!==e),r):r}function Ce({$values:t,$errors:e,$status:r}){const n=a.useCallback((c,i)=>{r.clearFieldDirty(c),e.setErrors(l=>De(c,i,l)),t.setValues({values:$e(c,i,t.refValues.current),updateState:!0})},[]),s=a.useCallback((c,i)=>{r.clearFieldDirty(c),e.setErrors(l=>Y(c,i,l,-1)),t.setValues({values:ve(c,i,t.refValues.current),updateState:!0})},[]),o=a.useCallback((c,i,l)=>{r.clearFieldDirty(c),e.setErrors(d=>Y(c,l,d,1)),t.setValues({values:Ie(c,i,l,t.refValues.current),updateState:!0})},[]);return{reorderListItem:n,removeListItem:s,insertListItem:o}}var Te=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,o;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[s]))return!1;for(s=n;s--!==0;){var c=o[s];if(!t(e[c],r[c]))return!1}return!0}return e!==e&&r!==r};const W=fe(Te);function M(t,e){const r=Object.keys(t);if(typeof e=="string"){const n=r.filter(s=>s.startsWith(`${e}.`));return t[e]||n.some(s=>t[s])||!1}return r.some(n=>t[n])}function Le({initialDirty:t,initialTouched:e,mode:r,$values:n}){const[s,o]=a.useState(e),[c,i]=a.useState(t),l=a.useRef(e),d=a.useRef(t),j=a.useCallback(b=>{const E=typeof b=="function"?b(l.current):b;l.current=E,r==="controlled"&&o(E)},[]),g=a.useCallback(b=>{const E=typeof b=="function"?b(d.current):b;d.current=E,r==="controlled"&&i(E)},[]),w=a.useCallback(()=>j({}),[]),m=b=>{const E=b?{...b,...n.refValues.current}:n.refValues.current;n.setValuesSnapshot(E),g({})},f=a.useCallback((b,E)=>{j(F=>M(F,b)===E?F:{...F,[b]:E})},[]),y=a.useCallback((b,E)=>{g(F=>M(F,b)===E?F:{...F,[b]:E})},[]),D=a.useCallback(b=>M(l.current,b),[]),k=a.useCallback(b=>g(E=>{if(typeof b!="string")return E;const F=re(b,E);return delete F[b],W(F,E)?E:F}),[]),v=a.useCallback(b=>{if(b){const F=h(b,d.current);if(typeof F=="boolean")return F;const R=h(b,n.refValues.current),B=h(b,n.valuesSnapshot.current);return!W(R,B)}return Object.keys(d.current).length>0?M(d.current):!W(n.refValues.current,n.valuesSnapshot.current)},[]),O=a.useCallback(()=>d.current,[]),$=a.useCallback(()=>l.current,[]);return{touchedState:s,dirtyState:c,touchedRef:l,dirtyRef:d,setTouched:j,setDirty:g,resetDirty:m,resetTouched:w,isTouched:D,setFieldTouched:f,setFieldDirty:y,setTouchedState:o,setDirtyState:i,clearFieldDirty:k,isDirty:v,getDirty:O,getTouched:$}}function Ae({initialValues:t,onValuesChange:e,mode:r}){const n=a.useRef(!1),[s,o]=a.useState(t||{}),c=a.useRef(s),i=a.useRef(s),l=a.useCallback(({values:f,subscribers:y,updateState:D=!0,mergeWithPreviousValues:k=!0})=>{const v=c.current,O=f instanceof Function?f(c.current):f,$=k?{...v,...O}:O;c.current=$,D&&o($),e==null||e($,v),y==null||y.filter(Boolean).forEach(b=>b({updatedValues:$,previousValues:v}))},[e]),d=a.useCallback(f=>{var k;const y=h(f.path,c.current),D=f.value instanceof Function?f.value(y):f.value;if(y!==D){const v=c.current,O=z(f.path,D,c.current);l({values:O,updateState:f.updateState}),(k=f.subscribers)==null||k.filter(Boolean).forEach($=>$({path:f.path,updatedValues:O,previousValues:v}))}},[]),j=a.useCallback(f=>{i.current=f},[]),g=a.useCallback((f,y)=>{n.current||(n.current=!0,l({values:f,updateState:r==="controlled"}),j(f),y())},[]),w=a.useCallback(()=>{l({values:i.current,updateState:!0,mergeWithPreviousValues:!1})},[]),m=a.useCallback(()=>c.current,[]);return{initialized:n,stateValues:s,refValues:c,valuesSnapshot:i,setValues:l,setFieldValue:d,resetValues:w,setValuesSnapshot:j,initialize:g,getValues:m}}function Pe({$status:t}){const e=a.useRef({}),r=a.useCallback((s,o)=>{a.useEffect(()=>(e.current[s]=e.current[s]||[],e.current[s].push(o),()=>{e.current[s]=e.current[s].filter(c=>c!==o)}),[o])},[]),n=a.useCallback(s=>e.current[s]?e.current[s].map(o=>c=>o({previousValue:h(s,c.previousValues),value:h(s,c.updatedValues),touched:t.isTouched(s),dirty:t.isDirty(s)})):[],[]);return{subscribers:e,watch:r,getFieldSubscribers:n}}function ee(t){const e=q(t);return{hasErrors:Object.keys(e).length>0,errors:e}}function H(t,e,r="",n={}){return typeof t!="object"||t===null?n:Object.keys(t).reduce((s,o)=>{const c=t[o],i=`${r===""?"":`${r}.`}${o}`,l=h(i,e);let d=!1;return typeof c=="function"&&(s[i]=c(l,e,i)),typeof c=="object"&&Array.isArray(l)&&(d=!0,l.forEach((j,g)=>H(c,e,`${i}.${g}`,s))),typeof c=="object"&&typeof l=="object"&&l!==null&&(d||H(c,e,i,s)),s},n)}function x(t,e){return ee(typeof t=="function"?t(e):H(t,e))}function N(t,e,r){if(typeof t!="string")return{hasError:!1,error:null};const n=x(e,r),s=Object.keys(n.errors).find(o=>t.split(".").every((c,i)=>c===o.split(".")[i]));return{hasError:!!s,error:s?n.errors[s]:null}}const Re="__MANTINE_FORM_INDEX__";function te(t,e){return e?typeof e=="boolean"?e:Array.isArray(e)?e.includes(t.replace(/[.][0-9]/g,`.${Re}`)):!1:!1}function _e({name:t,mode:e="controlled",initialValues:r,initialErrors:n={},initialDirty:s={},initialTouched:o={},clearInputErrorOnChange:c=!0,validateInputOnChange:i=!1,validateInputOnBlur:l=!1,onValuesChange:d,transformValues:j=m=>m,enhanceGetInputProps:g,validate:w}={}){const m=Oe(n),f=Ae({initialValues:r,onValuesChange:d,mode:e}),y=Le({initialDirty:s,initialTouched:o,$values:f,mode:e}),D=Ce({$values:f,$errors:m,$status:y}),k=Pe({$status:y}),[v,O]=a.useState(0),[$,b]=a.useState({}),E=a.useCallback(()=>{f.resetValues(),m.clearErrors(),y.resetDirty(),y.resetTouched(),e==="uncontrolled"&&O(u=>u+1)},[]),F=a.useCallback(u=>{f.initialize(u,()=>e==="uncontrolled"&&O(V=>V+1))},[]),R=a.useCallback((u,V,p)=>{const I=te(u,i);y.clearFieldDirty(u),y.setFieldTouched(u,!0),!I&&c&&m.clearFieldError(u),f.setFieldValue({path:u,value:V,updateState:e==="controlled",subscribers:[...k.getFieldSubscribers(u),I?C=>{const P=N(u,w,C.updatedValues);P.hasError?m.setFieldError(u,P.error):m.clearFieldError(u)}:null,(p==null?void 0:p.forceUpdate)!==!1&&e!=="controlled"?()=>b(C=>({...C,[u]:(C[u]||0)+1})):null]})},[d,w]),B=a.useCallback(u=>{const V=f.refValues.current;f.setValues({values:u,updateState:e==="controlled"}),c&&m.clearErrors(),e==="uncontrolled"&&O(p=>p+1),Object.keys(k.subscribers.current).forEach(p=>{const I=h(p,f.refValues.current),C=h(p,V);I!==C&&k.getFieldSubscribers(p).forEach(P=>P({previousValues:V,updatedValues:f.refValues.current}))})},[d,c]),U=a.useCallback(()=>{const u=x(w,f.refValues.current);return m.setErrors(u.errors),u},[w]),ne=a.useCallback(u=>{const V=N(u,w,f.refValues.current);return V.hasError?m.setFieldError(u,V.error):m.clearFieldError(u),V},[w]),oe=(u,{type:V="input",withError:p=!0,withFocus:I=!0,...C}={})=>{const L={onChange:ke(_=>R(u,_,{forceUpdate:!1}))};return p&&(L.error=m.errorsState[u]),V==="checkbox"?L[e==="controlled"?"checked":"defaultChecked"]=h(u,f.refValues.current):L[e==="controlled"?"value":"defaultValue"]=h(u,f.refValues.current),I&&(L.onFocus=()=>y.setFieldTouched(u,!0),L.onBlur=()=>{if(te(u,l)){const _=N(u,w,f.refValues.current);_.hasError?m.setFieldError(u,_.error):m.clearFieldError(u)}}),Object.assign(L,g==null?void 0:g({inputProps:L,field:u,options:{type:V,withError:p,withFocus:I,...C},form:K}))},ce=(u,V)=>p=>{p==null||p.preventDefault();const I=U();I.hasErrors?V==null||V(I.errors,f.refValues.current,p):u==null||u(j(f.refValues.current),p)},ie=u=>j(u||f.refValues.current),le=a.useCallback(u=>{u.preventDefault(),E()},[]),ue=a.useCallback(u=>u?!N(u,w,f.refValues.current).hasError:!x(w,f.refValues.current).hasErrors,[w]),ae=u=>`${v}-${u}-${$[u]||0}`,K={watch:k.watch,initialized:f.initialized.current,values:f.stateValues,getValues:f.getValues,setInitialValues:f.setValuesSnapshot,initialize:F,setValues:B,setFieldValue:R,errors:m.errorsState,setErrors:m.setErrors,setFieldError:m.setFieldError,clearFieldError:m.clearFieldError,clearErrors:m.clearErrors,resetDirty:y.resetDirty,setTouched:y.setTouched,setDirty:y.setDirty,isTouched:y.isTouched,resetTouched:y.resetTouched,isDirty:y.isDirty,getTouched:y.getTouched,getDirty:y.getDirty,reorderListItem:D.reorderListItem,insertListItem:D.insertListItem,removeListItem:D.removeListItem,reset:E,validate:U,validateField:ne,getInputProps:oe,onSubmit:ce,onReset:le,isValid:ue,getTransformedValues:ie,key:ae};return he(t,K),K}const Me=()=>{const t=de(),{setAuth:e}=be();return ge({mutationFn:async r=>{await Z.get("/sanctum/csrf-cookie");const n=await Z.post("/admin/login",r),{user:s,token:o}=await n.data;localStorage.setItem("token",o),e(s),(s==null?void 0:s.role)==="admin"||(s==null?void 0:s.role)==="owner"?t("/dashboard"):t("/dashboard/assigned-tasks")}})},He=()=>{const{height:t}=pe(),{mutate:e,isPending:r}=Me(),n=_e({initialValues:{email:"",password:""},validate:{email:o=>/^\S+@\S+$/.test(o)?null:"Invalid email",password:o=>o.length>7?null:"Password must be at least 8 characters"}}),s=o=>{const c=new FormData;for(const i in o)c.append(i,o[i]);e(c,{onSuccess:()=>{n.reset()},onError:()=>{Ee.error("Invalid credentials")}})};return T.jsxs(ye,{justify:"center",h:t,align:"center",children:[T.jsx(X,{src:je,h:690}),T.jsx("form",{onSubmit:n.onSubmit(s),children:T.jsxs(Ve,{gap:"md",children:[T.jsx(X,{style:{userSelect:"none",pointerEvents:"none"},w:300,src:me}),T.jsx(J,{w:400,label:"Email",placeholder:"Enter Email",...n.getInputProps("email")}),T.jsx(J,{w:400,label:"Password",placeholder:"Enter Password",...n.getInputProps("password")}),T.jsx(Se,{loading:r,disabled:r,type:"submit",mt:12,color:"#00cdfa",children:"Login"})]})})]})};export{He as default};

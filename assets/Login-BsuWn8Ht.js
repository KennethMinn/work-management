import{r as a,g as ae,u as fe,a as de,j as T,F as be,I as X,l as me,_ as ye}from"./index-CdaNCSdy.js";import{u as Ee,a as Z}from"./axiosInstance-CV4y__Ky.js";import{u as ge}from"./use-viewport-size-CF8sR4fx.js";import{S as pe}from"./Stack-BBUnv7TG.js";import{T as Ve}from"./TextInput-BSExqZ5H.js";import{P as Se}from"./PasswordInput-D0PXG41E.js";import{B as je}from"./Button-Clsx1tHw.js";import"./ActionIcon-BZbRPvMN.js";const Fe="/assets/auth-DGnL_MR0.jpg";function we(t){if(!/^[0-9a-zA-Z-]+$/.test(t))throw new Error(`[@mantine/use-form] Form name "${t}" is invalid, it should contain only letters, numbers and dashes`)}const he=typeof window<"u"?a.useLayoutEffect:a.useEffect;function S(t,e){he(()=>{if(t)return window.addEventListener(t,e),()=>window.removeEventListener(t,e)},[t])}function ke(t,e){t&&we(t),S(`mantine-form:${t}:set-field-value`,r=>e.setFieldValue(r.detail.path,r.detail.value)),S(`mantine-form:${t}:set-values`,r=>e.setValues(r.detail)),S(`mantine-form:${t}:set-initial-values`,r=>e.setInitialValues(r.detail)),S(`mantine-form:${t}:set-errors`,r=>e.setErrors(r.detail)),S(`mantine-form:${t}:set-field-error`,r=>e.setFieldError(r.detail.path,r.detail.error)),S(`mantine-form:${t}:clear-field-error`,r=>e.clearFieldError(r.detail)),S(`mantine-form:${t}:clear-errors`,e.clearErrors),S(`mantine-form:${t}:reset`,e.reset),S(`mantine-form:${t}:validate`,e.validate),S(`mantine-form:${t}:validate-field`,r=>e.validateField(r.detail)),S(`mantine-form:${t}:reorder-list-item`,r=>e.reorderListItem(r.detail.path,r.detail.payload)),S(`mantine-form:${t}:remove-list-item`,r=>e.removeListItem(r.detail.path,r.detail.index)),S(`mantine-form:${t}:insert-list-item`,r=>e.insertListItem(r.detail.path,r.detail.item,r.detail.index)),S(`mantine-form:${t}:set-dirty`,r=>e.setDirty(r.detail)),S(`mantine-form:${t}:set-touched`,r=>e.setTouched(r.detail)),S(`mantine-form:${t}:reset-dirty`,r=>e.resetDirty(r.detail)),S(`mantine-form:${t}:reset-touched`,e.resetTouched)}function Oe(t){return e=>{if(!e)t(e);else if(typeof e=="function")t(e);else if(typeof e=="object"&&"nativeEvent"in e){const{currentTarget:r}=e;r instanceof HTMLInputElement?r.type==="checkbox"?t(r.checked):t(r.value):(r instanceof HTMLTextAreaElement||r instanceof HTMLSelectElement)&&t(r.value)}else t(e)}}function q(t){return t===null||typeof t!="object"?{}:Object.keys(t).reduce((e,r)=>{const n=t[r];return n!=null&&n!==!1&&(e[r]=n),e},{})}function De(t){const[e,r]=a.useState(q(t)),n=a.useCallback(i=>{r(l=>q(typeof i=="function"?i(l):i))},[]),s=a.useCallback(()=>r({}),[]),o=a.useCallback(i=>{e[i]!==void 0&&n(l=>{const d={...l};return delete d[i],d})},[e]),c=a.useCallback((i,l)=>{l==null||l===!1?o(i):e[i]!==l&&n(d=>({...d,[i]:l}))},[e]);return{errorsState:e,setErrors:n,clearErrors:s,setFieldError:c,clearFieldError:o}}function te(t,e){if(e===null||typeof e!="object")return{};const r={...e};return Object.keys(e).forEach(n=>{n.includes(`${String(t)}.`)&&delete r[n]}),r}function J(t,e){const r=t.substring(e.length+1).split(".")[0];return parseInt(r,10)}function Q(t,e,r,n){if(e===void 0)return r;const s=`${String(t)}`;let o=r;n===-1&&(o=te(`${s}.${e}`,o));const c={...o},i=new Set;return Object.entries(o).filter(([l])=>{if(!l.startsWith(`${s}.`))return!1;const d=J(l,s);return Number.isNaN(d)?!1:d>=e}).forEach(([l,d])=>{const j=J(l,s),g=l.replace(`${s}.${j}`,`${s}.${j+n}`);c[g]=d,i.add(g),i.has(l)||delete c[l]}),c}function $e(t,{from:e,to:r},n){const s=`${t}.${e}`,o=`${t}.${r}`,c={...n};return Object.keys(n).every(i=>{let l,d;if(i.startsWith(s)&&(l=i,d=i.replace(s,o)),i.startsWith(o)&&(l=i.replace(o,s),d=i),l&&d){const j=c[l],g=c[d];return g===void 0?delete c[l]:c[l]=g,j===void 0?delete c[d]:c[d]=j,!1}return!0}),c}function Y(t,e,r){typeof r.value=="object"&&(r.value=L(r.value)),!r.enumerable||r.get||r.set||!r.configurable||!r.writable||e==="__proto__"?Object.defineProperty(t,e,r):t[e]=r.value}function L(t){if(typeof t!="object")return t;var e=0,r,n,s,o=Object.prototype.toString.call(t);if(o==="[object Object]"?s=Object.create(t.__proto__||null):o==="[object Array]"?s=Array(t.length):o==="[object Set]"?(s=new Set,t.forEach(function(c){s.add(L(c))})):o==="[object Map]"?(s=new Map,t.forEach(function(c,i){s.set(L(i),L(c))})):o==="[object Date]"?s=new Date(+t):o==="[object RegExp]"?s=new RegExp(t.source,t.flags):o==="[object DataView]"?s=new t.constructor(L(t.buffer)):o==="[object ArrayBuffer]"?s=t.slice(0):o.slice(-6)==="Array]"&&(s=new t.constructor(t)),s){for(n=Object.getOwnPropertySymbols(t);e<n.length;e++)Y(s,n[e],Object.getOwnPropertyDescriptor(t,n[e]));for(e=0,n=Object.getOwnPropertyNames(t);e<n.length;e++)Object.hasOwnProperty.call(s,r=n[e])&&s[r]===t[r]||Y(s,r,Object.getOwnPropertyDescriptor(t,r))}return s||t}function re(t){return typeof t!="string"?[]:t.split(".")}function h(t,e){const r=re(t);if(r.length===0||typeof e!="object"||e===null)return;let n=e[r[0]];for(let s=1;s<r.length&&n!==void 0;s+=1)n=n[r[s]];return n}function z(t,e,r){const n=re(t);if(n.length===0)return r;const s=L(r);if(n.length===1)return s[n[0]]=e,s;let o=s[n[0]];for(let c=1;c<n.length-1;c+=1){if(o===void 0)return s;o=o[n[c]]}return o[n[n.length-1]]=e,s}function Ie(t,{from:e,to:r},n){const s=h(t,n);if(!Array.isArray(s))return n;const o=[...s],c=s[e];return o.splice(e,1),o.splice(r,0,c),z(t,o,n)}function ve(t,e,r,n){const s=h(t,n);if(!Array.isArray(s))return n;const o=[...s];return o.splice(typeof r=="number"?r:o.length,0,e),z(t,o,n)}function Ce(t,e,r){const n=h(t,r);return Array.isArray(n)?z(t,n.filter((s,o)=>o!==e),r):r}function Te({$values:t,$errors:e,$status:r}){const n=a.useCallback((c,i)=>{r.clearFieldDirty(c),e.setErrors(l=>$e(c,i,l)),t.setValues({values:Ie(c,i,t.refValues.current),updateState:!0})},[]),s=a.useCallback((c,i)=>{r.clearFieldDirty(c),e.setErrors(l=>Q(c,i,l,-1)),t.setValues({values:Ce(c,i,t.refValues.current),updateState:!0})},[]),o=a.useCallback((c,i,l)=>{r.clearFieldDirty(c),e.setErrors(d=>Q(c,l,d,1)),t.setValues({values:ve(c,i,l,t.refValues.current),updateState:!0})},[]);return{reorderListItem:n,removeListItem:s,insertListItem:o}}var Pe=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,o;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[s]))return!1;for(s=n;s--!==0;){var c=o[s];if(!t(e[c],r[c]))return!1}return!0}return e!==e&&r!==r};const W=ae(Pe);function M(t,e){const r=Object.keys(t);if(typeof e=="string"){const n=r.filter(s=>s.startsWith(`${e}.`));return t[e]||n.some(s=>t[s])||!1}return r.some(n=>t[n])}function Le({initialDirty:t,initialTouched:e,mode:r,$values:n}){const[s,o]=a.useState(e),[c,i]=a.useState(t),l=a.useRef(e),d=a.useRef(t),j=a.useCallback(b=>{const E=typeof b=="function"?b(l.current):b;l.current=E,r==="controlled"&&o(E)},[]),g=a.useCallback(b=>{const E=typeof b=="function"?b(d.current):b;d.current=E,r==="controlled"&&i(E)},[]),w=a.useCallback(()=>j({}),[]),y=b=>{const E=b?{...b,...n.refValues.current}:n.refValues.current;n.setValuesSnapshot(E),g({})},f=a.useCallback((b,E)=>{j(F=>M(F,b)===E?F:{...F,[b]:E})},[]),m=a.useCallback((b,E)=>{g(F=>M(F,b)===E?F:{...F,[b]:E})},[]),D=a.useCallback(b=>M(l.current,b),[]),k=a.useCallback(b=>g(E=>{if(typeof b!="string")return E;const F=te(b,E);return delete F[b],W(F,E)?E:F}),[]),v=a.useCallback(b=>{if(b){const F=h(b,d.current);if(typeof F=="boolean")return F;const R=h(b,n.refValues.current),B=h(b,n.valuesSnapshot.current);return!W(R,B)}return Object.keys(d.current).length>0?M(d.current):!W(n.refValues.current,n.valuesSnapshot.current)},[]),O=a.useCallback(()=>d.current,[]),$=a.useCallback(()=>l.current,[]);return{touchedState:s,dirtyState:c,touchedRef:l,dirtyRef:d,setTouched:j,setDirty:g,resetDirty:y,resetTouched:w,isTouched:D,setFieldTouched:f,setFieldDirty:m,setTouchedState:o,setDirtyState:i,clearFieldDirty:k,isDirty:v,getDirty:O,getTouched:$}}function Ae({initialValues:t,onValuesChange:e,mode:r}){const n=a.useRef(!1),[s,o]=a.useState(t||{}),c=a.useRef(s),i=a.useRef(s),l=a.useCallback(({values:f,subscribers:m,updateState:D=!0,mergeWithPreviousValues:k=!0})=>{const v=c.current,O=f instanceof Function?f(c.current):f,$=k?{...v,...O}:O;c.current=$,D&&o($),e==null||e($,v),m==null||m.filter(Boolean).forEach(b=>b({updatedValues:$,previousValues:v}))},[e]),d=a.useCallback(f=>{var k;const m=h(f.path,c.current),D=f.value instanceof Function?f.value(m):f.value;if(m!==D){const v=c.current,O=z(f.path,D,c.current);l({values:O,updateState:f.updateState}),(k=f.subscribers)==null||k.filter(Boolean).forEach($=>$({path:f.path,updatedValues:O,previousValues:v}))}},[]),j=a.useCallback(f=>{i.current=f},[]),g=a.useCallback((f,m)=>{n.current||(n.current=!0,l({values:f,updateState:r==="controlled"}),j(f),m())},[]),w=a.useCallback(()=>{l({values:i.current,updateState:!0,mergeWithPreviousValues:!1})},[]),y=a.useCallback(()=>c.current,[]);return{initialized:n,stateValues:s,refValues:c,valuesSnapshot:i,setValues:l,setFieldValue:d,resetValues:w,setValuesSnapshot:j,initialize:g,getValues:y}}function Re({$status:t}){const e=a.useRef({}),r=a.useCallback((s,o)=>{a.useEffect(()=>(e.current[s]=e.current[s]||[],e.current[s].push(o),()=>{e.current[s]=e.current[s].filter(c=>c!==o)}),[o])},[]),n=a.useCallback(s=>e.current[s]?e.current[s].map(o=>c=>o({previousValue:h(s,c.previousValues),value:h(s,c.updatedValues),touched:t.isTouched(s),dirty:t.isDirty(s)})):[],[]);return{subscribers:e,watch:r,getFieldSubscribers:n}}function G(t){const e=q(t);return{hasErrors:Object.keys(e).length>0,errors:e}}function H(t,e,r="",n={}){return typeof t!="object"||t===null?n:Object.keys(t).reduce((s,o)=>{const c=t[o],i=`${r===""?"":`${r}.`}${o}`,l=h(i,e);let d=!1;return typeof c=="function"&&(s[i]=c(l,e,i)),typeof c=="object"&&Array.isArray(l)&&(d=!0,l.forEach((j,g)=>H(c,e,`${i}.${g}`,s))),typeof c=="object"&&typeof l=="object"&&l!==null&&(d||H(c,e,i,s)),s},n)}function x(t,e){return G(typeof t=="function"?t(e):H(t,e))}function N(t,e,r){if(typeof t!="string")return{hasError:!1,error:null};const n=x(e,r),s=Object.keys(n.errors).find(o=>t.split(".").every((c,i)=>c===o.split(".")[i]));return{hasError:!!s,error:s?n.errors[s]:null}}const _e="__MANTINE_FORM_INDEX__";function ee(t,e){return e?typeof e=="boolean"?e:Array.isArray(e)?e.includes(t.replace(/[.][0-9]/g,`.${_e}`)):!1:!1}function Me({name:t,mode:e="controlled",initialValues:r,initialErrors:n={},initialDirty:s={},initialTouched:o={},clearInputErrorOnChange:c=!0,validateInputOnChange:i=!1,validateInputOnBlur:l=!1,onValuesChange:d,transformValues:j=y=>y,enhanceGetInputProps:g,validate:w}={}){const y=De(n),f=Ae({initialValues:r,onValuesChange:d,mode:e}),m=Le({initialDirty:s,initialTouched:o,$values:f,mode:e}),D=Te({$values:f,$errors:y,$status:m}),k=Re({$status:m}),[v,O]=a.useState(0),[$,b]=a.useState({}),E=a.useCallback(()=>{f.resetValues(),y.clearErrors(),m.resetDirty(),m.resetTouched(),e==="uncontrolled"&&O(u=>u+1)},[]),F=a.useCallback(u=>{f.initialize(u,()=>e==="uncontrolled"&&O(V=>V+1))},[]),R=a.useCallback((u,V,p)=>{const I=ee(u,i);m.clearFieldDirty(u),m.setFieldTouched(u,!0),!I&&c&&y.clearFieldError(u),f.setFieldValue({path:u,value:V,updateState:e==="controlled",subscribers:[...k.getFieldSubscribers(u),I?C=>{const A=N(u,w,C.updatedValues);A.hasError?y.setFieldError(u,A.error):y.clearFieldError(u)}:null,(p==null?void 0:p.forceUpdate)!==!1&&e!=="controlled"?()=>b(C=>({...C,[u]:(C[u]||0)+1})):null]})},[d,w]),B=a.useCallback(u=>{const V=f.refValues.current;f.setValues({values:u,updateState:e==="controlled"}),c&&y.clearErrors(),e==="uncontrolled"&&O(p=>p+1),Object.keys(k.subscribers.current).forEach(p=>{const I=h(p,f.refValues.current),C=h(p,V);I!==C&&k.getFieldSubscribers(p).forEach(A=>A({previousValues:V,updatedValues:f.refValues.current}))})},[d,c]),U=a.useCallback(()=>{const u=x(w,f.refValues.current);return y.setErrors(u.errors),u},[w]),se=a.useCallback(u=>{const V=N(u,w,f.refValues.current);return V.hasError?y.setFieldError(u,V.error):y.clearFieldError(u),V},[w]),ne=(u,{type:V="input",withError:p=!0,withFocus:I=!0,...C}={})=>{const P={onChange:Oe(_=>R(u,_,{forceUpdate:!1}))};return p&&(P.error=y.errorsState[u]),V==="checkbox"?P[e==="controlled"?"checked":"defaultChecked"]=h(u,f.refValues.current):P[e==="controlled"?"value":"defaultValue"]=h(u,f.refValues.current),I&&(P.onFocus=()=>m.setFieldTouched(u,!0),P.onBlur=()=>{if(ee(u,l)){const _=N(u,w,f.refValues.current);_.hasError?y.setFieldError(u,_.error):y.clearFieldError(u)}}),Object.assign(P,g==null?void 0:g({inputProps:P,field:u,options:{type:V,withError:p,withFocus:I,...C},form:K}))},oe=(u,V)=>p=>{p==null||p.preventDefault();const I=U();I.hasErrors?V==null||V(I.errors,f.refValues.current,p):u==null||u(j(f.refValues.current),p)},ce=u=>j(u||f.refValues.current),ie=a.useCallback(u=>{u.preventDefault(),E()},[]),le=a.useCallback(u=>u?!N(u,w,f.refValues.current).hasError:!x(w,f.refValues.current).hasErrors,[w]),ue=u=>`${v}-${u}-${$[u]||0}`,K={watch:k.watch,initialized:f.initialized.current,values:f.stateValues,getValues:f.getValues,setInitialValues:f.setValuesSnapshot,initialize:F,setValues:B,setFieldValue:R,errors:y.errorsState,setErrors:y.setErrors,setFieldError:y.setFieldError,clearFieldError:y.clearFieldError,clearErrors:y.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:D.reorderListItem,insertListItem:D.insertListItem,removeListItem:D.removeListItem,reset:E,validate:U,validateField:se,getInputProps:ne,onSubmit:oe,onReset:ie,isValid:le,getTransformedValues:ce,key:ue};return ke(t,K),K}const Ne=()=>{const t=fe(),{setAuth:e}=de();return Ee({mutationFn:async r=>{await Z.get("/sanctum/csrf-cookie");const n=await Z.post("/admin/login",r),{user:s,token:o}=await n.data;localStorage.setItem("token",o),e(s),(s==null?void 0:s.role)==="admin"||(s==null?void 0:s.role)==="owner"?t("/dashboard"):t("/dashboard/assigned-tasks")}})},Xe=()=>{const{height:t}=ge(),{mutate:e,isPending:r}=Ne(),n=Me({initialValues:{email:"",password:""},validate:{email:o=>/^\S+@\S+$/.test(o)?null:"Invalid email",password:o=>o.length>7?null:"Password must be at least 8 characters"}}),s=o=>{const c=new FormData;for(const i in o)c.append(i,o[i]);e(c,{onSuccess:()=>{n.reset()},onError:()=>{ye.error("Invalid credentials")}})};return T.jsxs(be,{justify:"center",h:t,align:"center",children:[T.jsx(X,{src:Fe,h:690}),T.jsx("form",{onSubmit:n.onSubmit(s),children:T.jsxs(pe,{gap:"md",children:[T.jsx(X,{style:{userSelect:"none",pointerEvents:"none"},w:300,src:me}),T.jsx(Ve,{w:400,label:"Email",placeholder:"Enter Email",...n.getInputProps("email")}),T.jsx(Se,{w:400,label:"Password",placeholder:"Enter Password",...n.getInputProps("password")}),T.jsx(je,{loading:r,disabled:r,type:"submit",mt:12,color:"#00cdfa",children:"Login"})]})})]})};export{Xe as default};

import{d as j,r as k,j as e,B as c,F as a,T as S,_ as d}from"./index-DIqu7q72.js";import{A as T,D as q}from"./AlertModal-Ccb7kj30.js";import{u as v}from"./useGetAllShootingCategories-BAWnlCip.js";import{z as w,u as B,b as f,a as F,t as D,M as E,I as Q}from"./index-DAvzNLjh.js";import{u as b,a as y}from"./axiosInstance-BMsWOdQC.js";import{T as I}from"./TextInput-B_fDw_r2.js";import{B as u}from"./Button-D4AVOSMh.js";import{I as A}from"./IconEdit-B6zeteLb.js";import{I as L}from"./IconPlus-C5jC-0Y0.js";const z=w.object({name:w.string().min(1,"name is required")}),M=o=>{const t=j();return b({mutationFn:async s=>{await y.post(`/shooting-categories/${o}`,s)},onSuccess:()=>{t.invalidateQueries(["shooting-categories"])}})},P=o=>B({queryKey:["shooting-category",o],queryFn:async()=>await(await y.get(`/shooting-categories/${o}`)).data.shootingCategory,enabled:!!o}),N=({id:o})=>{const[t,{open:s,close:n}]=f(!1),{data:r}=P(o),{mutate:l,isPending:i}=M(o),{register:x,handleSubmit:p,setValue:m}=F({resolver:D(z)}),h=C=>{const g=new FormData;g.append("name",C.name),l(g,{onSuccess:()=>{n(),d.success("Shooting category updated Successfully.")},onError:()=>{d.error("Something went wrong.")}})};return k.useEffect(()=>{r&&m("name",r.name)},[r,m]),e.jsxs(c,{children:[e.jsx(E,{opened:t,onClose:n,title:"Edit Shooting category Form",centered:!0,styles:{title:{fontSize:"20px",fontWeight:600}},children:e.jsx(c,{my:10,children:e.jsxs("form",{onSubmit:p(h),children:[e.jsxs(a,{align:"center",gap:"lg",children:[e.jsx(S,{fw:500,children:"Name"}),e.jsx(I,{style:{width:"100%"},placeholder:"Enter category name",...x("name")})]}),e.jsxs(a,{justify:"end",gap:15,mt:20,children:[e.jsx(u,{radius:4,size:"sm",onClick:n,color:"dark",children:"Cancel"}),e.jsx(u,{type:"submit",radius:4,size:"sm",loading:i,disabled:i,color:"blue",children:"Update"})]})]})})}),e.jsx(A,{onClick:s,style:{color:"#4361ee",cursor:"pointer"}})]})},$=()=>{const o=j();return b({mutationFn:async t=>await y.delete(`/shooting-categories/${t}/soft-delete`),onSuccess:()=>{o.invalidateQueries(["shooting-categories"])}})},G=({id:o})=>{const[t,{open:s,close:n}]=f(!1),{mutate:r,isPending:l}=$(),i=()=>{r(o,{onSuccess:()=>{n(),d.success("Shooting category deleted successfully.")}})};return e.jsxs(c,{children:[e.jsx(T,{isLoading:l,title:"Shooting category Delete",description:"This action cannot be undone.",opened:t,close:n,onConfirm:i}),e.jsx(Q,{onClick:s,style:{color:"#ef233c",cursor:"pointer"}})]})},U=()=>[{name:"Id",selector:t=>t.id,width:"100px"},{name:"Name",selector:t=>t.name,width:"500px"},{name:"Actions",cell:t=>e.jsxs(a,{align:"center",gap:20,children:[e.jsx(N,{id:t.id}),e.jsx(G,{id:t.id})]})}],W=()=>{const o=j();return b({mutationFn:async t=>{await y.post("/shooting-categories",t)},onSuccess:()=>{o.invalidateQueries(["shooting-categories"])}})},_=()=>{var h;const[o,{open:t,close:s}]=f(!1),{mutate:n,isPending:r}=W(),{register:l,handleSubmit:i,reset:x,formState:{errors:p}}=F({resolver:D(z)}),m=C=>{const g=new FormData;g.append("name",C.name),n(g,{onSuccess:()=>{x(),s(),d.success("Shooting category created Successfully.")},onError:()=>{d.error("Something went wrong.")}})};return e.jsxs(c,{children:[e.jsx(E,{opened:o,onClose:s,title:"Shooting Category Company Form",centered:!0,styles:{title:{fontSize:"20px",fontWeight:600}},children:e.jsx(c,{my:10,children:e.jsxs("form",{onSubmit:i(m),children:[e.jsxs(a,{align:"center",gap:"lg",children:[e.jsx(S,{fw:500,children:"Name"}),e.jsx(I,{style:{width:"100%"},placeholder:"Enter category name",...l("name"),error:(h=p.name)==null?void 0:h.message})]}),e.jsxs(a,{justify:"end",gap:15,mt:20,children:[e.jsx(u,{radius:4,size:"sm",onClick:s,color:"dark",children:"Cancel"}),e.jsx(u,{type:"submit",radius:4,size:"sm",loading:r,disabled:r,color:"blue",children:"Create"})]})]})})}),e.jsx(a,{justify:"end",children:e.jsx(u,{onClick:t,leftSection:e.jsx(L,{size:16}),children:"Create"})})]})},K=()=>{const o=U(),{data:t,isLoading:s}=v("visible");return e.jsxs(c,{children:[e.jsx(_,{}),s?e.jsx(S,{children:"loading..."}):e.jsx(q,{columns:o,data:t})]})},te=()=>e.jsx(K,{});export{te as default};

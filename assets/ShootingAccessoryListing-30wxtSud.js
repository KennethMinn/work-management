import{d as C,j as e,B as m,F as l,T as y,_ as p,r as L}from"./index-GMjYCCZP.js";import{A as M,D as G}from"./AlertModal-DUMj9F5n.js";import{u as k,z as _,c as b,a as E,M as q,C as I,t as z,I as N}from"./index-xlF32sg_.js";import{a as x,u as F}from"./axiosInstance-BCsj8OtX.js";import{u as v}from"./useGetAllShootingCategories-C7p2efh9.js";import{S as T}from"./Stack-ImU5974r.js";import{T as P}from"./TextInput-CdohHagb.js";import{S as B}from"./Select-DS7k8gKG.js";import{B as h}from"./Button-sFRrCIcf.js";import{I as $}from"./IconPlus-DN1aYvKt.js";import{I as K}from"./IconEdit-BfwqRLLd.js";const U=()=>k({queryKey:["shooting-accessories"],queryFn:async()=>await(await x.get("/shooting-accessories")).data.shootingAccessories}),W=()=>{const o=C();return F({mutationFn:async s=>{await x.post("/shooting-accessories",s)},onSuccess:()=>{o.invalidateQueries(["shooting-accessories"])}})},Q=_.object({name:_.string().min(1,"name is required"),shooting_category_id:_.string().min(1,"shooting category is required")}),R=()=>{var S;const[o,{open:s,close:t}]=b(!1),{mutate:a,isPending:r}=W(),{data:c}=v("visible"),{register:u,handleSubmit:j,control:f,reset:A,formState:{errors:d}}=E({resolver:z(Q)}),w=g=>{const n=new FormData;n.append("name",g.name),n.append("shooting_category_id",g.shooting_category_id),a(n,{onSuccess:()=>{A(),t(),p.success("Shooting accessory created Successfully.")},onError:()=>{p.error("Something went wrong.")}})};return e.jsxs(m,{children:[e.jsx(q,{opened:o,onClose:t,title:"Shooting Accessory Company Form",centered:!0,styles:{title:{fontSize:"20px",fontWeight:600}},children:e.jsx(m,{my:10,children:e.jsxs("form",{onSubmit:j(w),children:[e.jsxs(T,{children:[e.jsxs(l,{align:"center",gap:"lg",children:[e.jsx(y,{w:140,fw:500,children:"Name"}),e.jsx(P,{style:{width:"100%"},placeholder:"Enter accessory name",...u("name"),error:(S=d.name)==null?void 0:S.message})]}),e.jsxs(l,{align:"center",gap:"lg",children:[e.jsx(y,{w:140,fw:500,children:"Company"}),e.jsx(I,{name:"shooting_category_id",control:f,render:({field:g})=>{var n;return e.jsx(B,{style:{width:"100%"},placeholder:"Pick shooting category",data:c==null?void 0:c.map(i=>({label:i.name,value:i.id.toString()})),...g,error:(n=d.shooting_category_id)==null?void 0:n.message})}})]})]}),e.jsxs(l,{justify:"end",gap:15,mt:20,children:[e.jsx(h,{radius:4,size:"sm",onClick:t,color:"dark",children:"Cancel"}),e.jsx(h,{type:"submit",radius:4,size:"sm",loading:r,disabled:r,color:"blue",children:"Create"})]})]})})}),e.jsx(l,{justify:"end",children:e.jsx(h,{onClick:s,leftSection:e.jsx($,{size:16}),children:"Create"})})]})},V=o=>k({queryKey:["shooting-accessory",o],queryFn:async()=>await(await x.get(`/shooting-accessory/${o}`)).data.shootingAccessory,enabled:!!o}),H=o=>{const s=C();return F({mutationFn:async t=>{await x.post(`/shooting-accessories/${o}`,t)},onSuccess:()=>{s.invalidateQueries(["shooting-accessories"])}})},J=({id:o})=>{const[s,{open:t,close:a}]=b(!1),{data:r}=V(o),{data:c}=v("visible"),{mutate:u,isPending:j}=H(o),{register:f,handleSubmit:A,setValue:d,control:w,formState:{errors:S}}=E({resolver:z(Q)}),g=n=>{const i=new FormData;i.append("name",n.name),i.append("shooting_category_id",n.shooting_category_id),u(i,{onSuccess:()=>{a(),p.success("Shooting category updated Successfully.")},onError:()=>{p.error("Something went wrong.")}})};return L.useEffect(()=>{r&&(d("name",r.name),d("shooting_category_id",r.shooting_category_id.toString()))},[r,d]),e.jsxs(m,{children:[e.jsx(q,{opened:s,onClose:a,title:"Edit Shooting category Form",centered:!0,styles:{title:{fontSize:"20px",fontWeight:600}},children:e.jsx(m,{my:10,children:e.jsxs("form",{onSubmit:A(g),children:[e.jsxs(T,{children:[e.jsxs(l,{align:"center",gap:"lg",children:[e.jsx(y,{w:140,fw:500,children:"Name"}),e.jsx(P,{style:{width:"100%"},placeholder:"Enter category name",...f("name")})]}),e.jsxs(l,{align:"center",gap:"lg",children:[e.jsx(y,{w:140,fw:500,children:"Company"}),e.jsx(I,{name:"shooting_category_id",control:w,render:({field:n})=>{var i;return e.jsx(B,{style:{width:"100%"},placeholder:"Pick shooting category",data:c==null?void 0:c.map(D=>({label:D.name,value:D.id.toString()})),...n,error:(i=S.shooting_category_id)==null?void 0:i.message})}})]})]}),e.jsxs(l,{justify:"end",gap:15,mt:20,children:[e.jsx(h,{radius:4,size:"sm",onClick:a,color:"dark",children:"Cancel"}),e.jsx(h,{type:"submit",radius:4,size:"sm",loading:j,disabled:j,color:"blue",children:"Update"})]})]})})}),e.jsx(K,{onClick:t,style:{color:"#4361ee",cursor:"pointer"}})]})},O=()=>{const o=C();return F({mutationFn:async s=>await x.delete(`/shooting-accessories/${s}`),onSuccess:()=>{o.invalidateQueries(["shooting-accessories"])}})},X=({id:o})=>{const[s,{open:t,close:a}]=b(!1),{mutate:r,isPending:c}=O(),u=()=>{r(o,{onSuccess:()=>{a(),p.success("Shooting accessory deleted successfully.")}})};return e.jsxs(m,{children:[e.jsx(M,{isLoading:c,title:"Shooting Accessory Delete",description:"This action cannot be undone.",opened:s,close:a,onConfirm:u}),e.jsx(N,{onClick:t,style:{color:"#ef233c",cursor:"pointer"}})]})},Y=()=>[{name:"Id",selector:s=>s.id,width:"100px"},{name:"Name",selector:s=>s.name,width:"140px"},{name:"Shooting Category",selector:s=>s.shooting_category.name,width:"500px"},{name:"Actions",cell:s=>e.jsxs(l,{align:"center",gap:20,children:[e.jsx(J,{id:s.id}),e.jsx(X,{id:s.id})]})}],Z=()=>{const o=Y(),{data:s,isLoading:t}=U();return e.jsxs(m,{children:[e.jsx(R,{}),t?e.jsx(y,{children:"loading..."}):e.jsx(G,{columns:o,data:s})]})},ge=()=>e.jsx(Z,{});export{ge as default};
